<h2><i class="fa fa-calendar"></i> Timeline</h2>
<div class="timeline__header">
    <!-- <div class="timeline__date-filter">
        <div>
            <label>From:</label>
            <utc-datepicker [date]="started" [button]="true" [format]="dateFormat"
                            (dateChange)="onStartSelect($event)"></utc-datepicker>
        </div>
        <div>
            <label>To:</label>
            <utc-datepicker [date]="ended" [button]="true" [format]="dateFormat"
                            (dateChange)="onEndSelect($event)"></utc-datepicker>
        </div>
        <div class="timeline__date-filter-dropdown">
            <p-dropdown [options]="dataOptions" [(ngModel)]="selectedDataOption"
                            [style]="{'width':'150px'}" placeholder="Select..." [showClear]="false">
            </p-dropdown>
        </div>
        <button pButton class="timeline__date-filter-btn" [ngClass]="applyBtnClass" label="Apply"
                (click)="onApplyClick()"></button>
    </div> -->
</div>
<button pButton type="button" class="ui-button-primary timeline__filter-toggle" icon="fa fa-filter"
            (click)="showFilters = !showFilters"></button>

<p-sidebar [(visible)]="showFilters" position="left" [style]="{'width':'25vw'}" [blockScroll]="true" baseZIndex="1002">
    <h2>Timeline Filters</h2>
    <label>From</label>
    <utc-datepicker class="noWrap" [date]="started" [button]="true" (dateChange)="onStartSelect($event)"></utc-datepicker>
    <label>To</label>
    <utc-datepicker class="noWrap" [date]="ended" [button]="true" (dateChange)="onEndSelect($event)"></utc-datepicker>
    <label>Data Source</label>
    <div class="timeline__filter-loading" *ngIf="dataTypesLoading">
        <i class="fa fa-circle-o-notch fa-spin"></i>
    </div>
    
    <p-dropdown [options]="dataOptions" [(ngModel)]="selectedDataOption" (onChange)="changeDataTypeSelection()"
                [style]="{'width':'100%'}" placeholder="Select..." *ngIf="!dataTypesLoading" [showClear]="false"></p-dropdown>
    <div>
        <label>{{dataTypeFilterText}}</label>
        <p-multiSelect [options]="filteredChoicesOptions" [(ngModel)]="filtersApplied" [style]="{'width':'100%'}"></p-multiSelect><br />
        To view an aggregate count for the data source, leave this filter unselected.
    </div>
    <!-- <div class="metrics__filter-loading" *ngIf="filteredChoicesLoading">
        <i class="fa fa-circle-o-notch fa-spin"></i>
    </div>
    <div *ngIf="filteredChoicesOptions.length > 0">
        <label>{{dataTypeFilterText}}</label>
        <p-multiSelect [options]="filteredChoicesOptions" [(ngModel)]="filtersApplied" [style]="{'width':'100%'}"></p-multiSelect><br />
        To view an aggregate count for the data source, leave this filter unselected.
    </div>
    <div *ngIf="columns.length > 0">
        <label>Primary Metric</label>
        <p-dropdown [options]="metricOptions" [(ngModel)]="selectedMetric1" [style]="{'width':'100%'}" [showClear]="false"></p-dropdown>
        <label>Secondary Metric</label>
        <p-dropdown [options]="metricOptions" [(ngModel)]="selectedMetric2" [style]="{'width':'100%'}" [showClear]="false"></p-dropdown>
    </div>
    <label>Primary Metric Display</label>
    <p-dropdown [options]="chartTypes" [(ngModel)]="selectedChartType1" [style]="{'width':'100%'}" [showClear]="false"></p-dropdown>
    <div *ngIf="selectedMetric2">
        <label>Secondary Metric Display</label>
        <p-dropdown [options]="chartTypes" [(ngModel)]="selectedChartType2" [style]="{'width':'100%'}" [showClear]="false"></p-dropdown>
    </div> -->
    <button pButton icon="fa fa-refresh" class="timeline__date-filter-btn" [ngClass]="applyBtnClass" label="Update Chart"
    (click)="onApplyClick()"></button>
</p-sidebar>

<div class="timeline__chart">
        <dev-loading-indicator [loading]="chartLoading"></dev-loading-indicator>
        <p-chart type="timeline" style = "margin-top: 100px" [options]="options" [data]="data" *ngIf="data" [height]="1000"></p-chart>
</div>
