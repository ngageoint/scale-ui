<h2><i class="fa fa-tachometer"></i> Job Latency</h2>
<div class="metrics__container">
    <div *ngIf="selectedJobTypeId < 0">
        Open the <a (click)="showFilters = true">filters dialog</a> to select a data source.
    </div>
    <div [hidden]="!showChart">
        <div class="job-avg-runtime__container">
            <div class="scale-chart-container">
                <dev-loading-indicator [loading]="chartLoading"></dev-loading-indicator>
                <p-chart #chart type="bar" [data]="data" [options]="options"></p-chart>
            </div>
        </div>
    </div>

    <button pButton type="button" class="ui-button-primary metrics__filter-toggle" icon="fa fa-filter"
            (click)="showFilters = !showFilters"></button>

    <p-sidebar [(visible)]="showFilters" position="left" [style]="{'width':'25vw'}" [blockScroll]="true"
               baseZIndex="1002">
        <h2>Job Latency Filters</h2>
        <label for="date-start">From</label>
        <p-calendar [(ngModel)]="startDate" inputId="date-start" showButtonBar="true"
                    panelStyleClass="metricsDateFilter" appendTo="body" [showIcon]="true"
                    dateFormat="yy/mm/dd" [monthNavigator]="true" [yearNavigator]="true" [yearRange]="yearRange">
        </p-calendar>

        <label for="date-end">To</label>
        <p-calendar [(ngModel)]="endDate" inputId="date-end" showButtonBar="true"
                    panelStyleClass="metricsDateFilter" appendTo="body" [showIcon]="true"
                    dateFormat="yy/mm/dd" [monthNavigator]="true" [yearNavigator]="true" [yearRange]="yearRange">
        </p-calendar>

        <label class="required">Job Type Source</label>
        <div class="metrics__filter-loading" *ngIf="dataTypesLoading">
            <i class="fa fa-circle-o-notch fa-spin"></i>
        </div>
        <p-dropdown [options]="jobTypes" [(ngModel)]="selectedJobTypeId" (onChange)="changeJobTypeSelection()"
                    [style]="{'width':'100%'}" placeholder="Select..." *ngIf="!dataTypesLoading" [showClear]="false">
        </p-dropdown>
        <button pButton icon="fa fa-refresh" label="Update Chart" (click)="showFilters = false || updateChart()"
                [disabled]="!selectedMetrics"></button>
    </p-sidebar>
</div>
